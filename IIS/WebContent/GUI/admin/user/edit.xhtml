<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:sec="http://www.springframework.org/security/tags"
	template="/templates/public.xhtml">

	<ui:define name="content">
	    <div class="center_left">
        	<div class="title_welcome">Просмотр/редактирование пользователя</div>
        	<h:form>
					<p:growl id="message" showDetail="true"  autoupdate="true"/>
					
					<h:panelGrid columns="2">
						<h:outputLabel for="male" value="Пол:" />
						<p:selectOneRadio id="male" value="#{userBean.selectedUser.male}">  
				            <f:selectItem itemLabel="Мужчина" itemValue="true" />  
				            <f:selectItem itemLabel="Женщина" itemValue="false" />  
		        		</p:selectOneRadio>
		        		
		        		<h:outputLabel for="login" value="Логин:" />
						<p:inputText id="login" required="true" size="30"
							value="#{userBean.selectedUser.login}" />

						<h:outputLabel for="fname" value="Имя:" />
						<p:inputText id="fname" size="30"
							value="#{userBean.selectedUser.fname}" />
							
						<h:outputLabel for="lname" value="Фамилия:" />
						<p:inputText id="lname" size="30"
							value="#{userBean.selectedUser.lname}" />
							
						<h:outputLabel for="mname" value="Отчество:" />
						<p:inputText id="mname" size="30"
							value="#{userBean.selectedUser.mname}" />
							
						<h:outputLabel for="birthday" value="Д/Р:" />
						<p:calendar id="birthday" value="#{userBean.selectedUser.birthday}"
							mode="popup" navigator="true" pattern="dd.MM.yyyy"
							yearRange="1950:2012" size="30" />
		
						<h:outputLabel for="address" value="Адрес:" />
						<p:inputText id="address" size="30"
							value="#{userBean.selectedUser.address}" />
							
						<h:outputLabel for="phone" value="Телефон:" />
						<p:inputMask id="phone" size="30" value="#{userBean.selectedUser.phone}"
							mask="(999) 999-9999" />
		
						<h:outputLabel for="phone2" value="Телефон2:" />
						<p:inputText id="phone2" size="30"
							value="#{userBean.selectedUser.phone2}" />
							
						<h:outputLabel for="role" value="Роль:" />
						 <p:selectCheckboxMenu id="role" value="#{userBean.selectedRoles}" label="Роль" filter="true" filterText="Filter" filterMatchMode="startsWith" panelStyle="width:220px">  
	        				<f:selectItems value="#{userBean.allRoles}" />  
	    				</p:selectCheckboxMenu> 
					</h:panelGrid>
					
					<br/>
					<p:commandButton value="Сохранить" update="message"
						action="#{userBean.update}" icon="ui-icon-disk" >
					</p:commandButton>
					<p:commandButton value="Удалить" update="message"
						action="#{userBean.delete}" icon="ui-icon-close" >
					</p:commandButton>
				</h:form>
				<br/>
				
				<p:dataTable var="time" value="#{userBean.loggedTimeCurrentUser}" paginator="true" rows="10"  
                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                 rowsPerPageTemplate="5,10,15">  
			        <p:column headerText="Время входа в систему">  
			            <h:outputText value="#{time}" />  
			        </p:column>  
			    </p:dataTable>
        </div> 
	</ui:define>
</ui:composition>